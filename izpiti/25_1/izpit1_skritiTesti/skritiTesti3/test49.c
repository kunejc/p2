
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga3.h"

Notranje* zgradi(int* t, int n, Notranje** element2naslov) {
    Notranje* prvo = NULL;
    Notranje* zadnje = NULL;
    for (int i = 0; i < n; i++) {
        Notranje* v = calloc(1, sizeof(Notranje));
        v->podatek = t[i];
        element2naslov[v->podatek] = v;
        if (prvo == NULL) {
            prvo = zadnje = v;
        } else {
            zadnje->desno = v;
            zadnje = zadnje->desno;
        }
    }
    return prvo;
}

void izpisiNotranje(Notranje* zacetek) {
    printf("[");
    Notranje* v = zacetek;
    while (v != NULL) {
        if (v != zacetek) {
            printf(", ");
        }
        printf("%d", v->podatek);
        v = v->desno;
    }
    printf("]");
}

void izpisiZunanje(Zunanje* glava) {
    printf("[");
    Zunanje* v = glava;
    while (v != NULL) {
        if (v != glava) {
            printf(", ");
        }
        izpisiNotranje(v->prvo);
        v = v->dol;
    }
    printf("]");
}

void pocistiNotranje(Notranje* prvo) {
    Notranje* v = prvo;
    while (v != NULL) {
        Notranje* brisi = v;
        v = v->desno;
        free(brisi);
    }
}

void pocistiZunanje(Zunanje* glava) {
    Zunanje* v = glava;
    while (v != NULL) {
        pocistiNotranje(v->prvo);
        Zunanje* brisi = v;
        v = v->dol;
        free(brisi);
    }
}

int maksimum(int* t, int n) {
    int naj = 0;
    for (int i = 0; i < n; i++) {
        if (t[i] > naj) {
            naj = t[i];
        }
    }
    return naj;
}

void preveriIstovetnost(Zunanje* glava, Notranje** element2naslov) {
    Zunanje* z = glava;
    while (z != NULL) {
        Notranje* n = z->prvo;
        while (n != NULL) {
            printf("%d", element2naslov[n->podatek] == n);
            n = n->desno;
        }
        z = z->dol;
    }
}

int TABELA[] = {628, 3908, 1234, 324, 9159, 9109, 9651, 9918, 5801, 6619, 1128, 4834, 457, 2404, 2952, 3780, 8748, 7578, 7862, 295, 4813, 3320, 6713, 8426, 2255, 5848, 5626, 1201, 304, 6813, 6954, 577, 7079, 4639, 2727, 381, 7945, 3989, 6967, 4497, 1245, 8020, 1089, 6475, 8967, 5447, 5628, 3892, 561, 3349, 8713, 3247, 3117, 8003, 2569, 1994, 4739, 7710, 6188, 473, 5629, 3530, 1928, 9755, 6075, 3915, 2271, 8589, 1705, 1135, 3393, 6779, 6816, 9494, 3109, 653, 5158, 2822, 1102, 6049, 7458, 2157, 930, 6850, 2857, 3055, 3626, 21, 3805, 8620, 8766, 5458, 7566, 6135, 6808, 3305, 2861, 9984, 8946, 9560, 5294, 7484, 7324, 2980, 293, 2083, 2829, 9627, 4960, 4037, 7533, 5517, 1478, 8474, 7792, 889, 8125, 9579, 3651, 4869, 172, 7734, 9558, 7138, 4466, 6082, 6950, 6184, 3047, 1717, 6491, 6447, 1421, 3268, 3586, 4057, 6319, 9188, 2109, 9921, 1399, 3437, 5644, 4525, 9110, 8066, 8705, 3978, 1682, 5990, 6846, 3077, 2154, 6113, 9203, 6277, 104, 9744, 7210, 2845, 36, 6606, 1892, 6344, 4141, 9395, 7975, 200, 3951, 2712, 9293, 3026, 121, 4498, 9609, 2998, 1785, 6776, 6077, 7773, 3103, 5939, 5630, 6126, 5553, 330, 5218, 5840, 3317, 3343, 535, 519, 4018, 7354, 5951, 8842, 2290, 2194, 9585, 9781, 8615, 7287, 3177, 4730, 7540, 6308, 3646, 6404, 2115, 2571, 301, 7776, 0, 3279, 3187, 8202, 1522, 6810, 6719, 9090, 7622, 9118, 1640, 1674, 3784, 2480, 8856, 8490, 8382, 9794, 4694, 9917, 7956, 5773, 8108, 6607, 8995, 9151, 1918, 5229, 828, 8875, 1784, 1195, 4679, 9037, 7419, 5867, 8883, 2201, 1546, 2469, 3134, 7884, 4350, 7848, 6505, 9048, 8710, 5030, 9809, 954, 9696, 7498, 5679, 649, 8487, 2250, 5403, 4486, 5166, 2117, 3074, 4419, 1624, 8625, 7586, 9751, 3459, 9620, 2757, 2466, 6947, 5591, 4982, 1063, 2252, 8465, 4744, 8129, 2525, 5625, 4968, 5980, 5212, 1405, 8605, 6842, 5829, 3215, 4369, 4918, 9399, 5141, 6003, 5603, 3734, 6243, 3145, 3225, 9283, 3565, 9443, 3596, 8595, 8601, 2212, 6769, 4499, 8802, 7410, 8480, 5666, 3653, 7330, 9666, 2308, 7785, 4693, 2719, 5813, 8010, 2550, 2026, 7616, 7658, 4278, 5860, 4191, 1926, 7430, 5509, 3090, 9327, 1347, 8326, 754, 8034, 6258, 4951, 4255, 7233, 7451, 1763, 7732, 6006, 9083, 9084, 3363, 4066, 1104, 1444, 9756, 2199, 1209, 7618, 5947, 2665, 5012, 3089, 3538, 9144, 6730, 2981, 9808, 4673, 3389, 7205, 657, 4837, 4698, 6495, 595, 8234, 8901, 4161, 7612, 4926, 3174, 1235, 9165, 4226, 6022, 7307, 4016, 5908, 9707, 4451, 7055, 6032, 4603, 8513, 1188, 4509, 7171, 8443, 294, 4723, 4240, 8211, 6389, 7438, 8609, 531, 209, 9864, 3101, 9674, 1898, 7185, 9904, 3799, 2692, 6116, 9739, 3007, 5703, 8771, 6614, 6400, 5013, 5147, 6983, 9123, 5068, 3938, 8660, 429, 9883, 6390, 9132, 781, 6189, 1314, 6645, 3346, 19, 6675, 9254, 6455, 2289, 3394, 8444, 1771, 7090, 6211, 7285, 2315, 1924, 6142, 4984, 7643, 411, 9701, 7821, 3677, 1173, 2837, 8728, 6057, 7569, 6182, 3164, 5925, 5518, 7494, 9595, 5228, 8751, 2802, 3422, 1742, 5560, 4394, 5189, 3492, 8419, 8481, 8456, 8518, 1219, 1590, 4786, 1650, 1753, 6181, 5741, 6652, 4913, 4569, 1800, 2905, 8028, 3202, 5463, 5420, 1831, 830, 3010, 7302, 86, 8851, 617, 7145, 1513, 2292, 1559, 6427, 8479, 2203, 4458, 5647, 4549, 3916, 9795, 9586, 6086, 5475, 2151, 3303, 5851, 5244, 934, 1825, 6596, 9833, 1248, 8783, 2519, 6218, 445, 1997, 8821, 5187, 5523, 3861, 7411, 4614, 618, 4288, 5074, 9550, 7288, 8965, 5278, 1249, 9405, 9645, 1177, 7946, 2164, 7101, 9819, 1661, 9855, 4028, 1819, 3622, 9542, 5901, 2713, 9093, 2407, 1491, 5336, 8925, 2705, 3788, 8130, 5754, 4065, 2418, 5922, 7847, 9768, 4768, 8100, 3161, 6348, 6015, 210, 4868, 6460, 2042, 698, 9523, 2384, 6920, 9986, 9660, 7363, 8635, 9130, 44, 8147, 34, 3370, 406, 7716, 5225, 6795, 4009, 6797, 5863, 4823, 7037, 2974, 1606, 5540, 2234, 2022, 7309, 8680, 186, 4157, 638, 3500, 4566, 1078, 2270, 2321, 3120, 1310, 8844, 2878, 8399, 6698, 9098, 3244, 5302, 1554, 5144, 7503, 5724, 4957, 9507, 7313, 5828, 2667, 1966, 6332, 5899, 7755, 9419, 9948, 556, 8923, 8886, 3078, 1157, 1221, 1368, 2273, 2777, 6468, 6130, 4724, 6843, 5345, 5690, 4151, 2319, 6906, 1270, 3368, 1000, 6412, 2193, 5715, 4952, 8853, 7094, 7650, 9153, 7250, 4838, 9440, 2560, 810, 5682, 4411, 4076, 3691, 4729, 7504, 5578, 2939, 8629, 850, 6340, 5565, 7424, 1822, 6974, 1744, 776, 9463, 2966, 7316, 2930, 5089, 7022, 4445, 9845, 3831, 9522, 5729, 8575, 1730, 2711, 3972, 9427, 6205, 4027, 7585, 3875, 177, 1974, 1060, 9774, 682, 6440, 854, 1616, 3777, 8914, 1494, 9873, 4249, 5844, 2098, 9909, 8581, 3222, 4106, 8068, 1795, 645, 7778, 8784, 1988, 6171, 8652, 2248, 150, 5790, 9114, 5643, 8962, 1517, 2339, 867, 1668, 7813, 9760, 8370, 7108, 586, 8539, 1866, 2320, 4879, 8905, 5769, 1033, 4508, 2758, 8237, 655, 629, 6937, 4554, 9333, 2821, 167, 1153, 1931, 2383, 1394, 2013, 4783, 8733, 6636, 6874, 7882, 1342, 1390, 3740, 3987, 2913, 1002, 5279, 5823, 6103, 6817, 6685, 3484, 832, 6581, 5291, 4519, 2753, 2596, 1199, 4056, 4865, 9640, 2595, 1418, 8526, 3000, 2078, 4600, 6700, 1675, 9108, 4433, 327, 1917, 9741, 9085, 2450, 2085, 3154, 9445, 976, 1601, 9407, 4732, 6786, 87, 2804, 1229, 7713, 714, 5794, 9001, 5155, 9565, 9029, 4580, 8845, 6625, 3566, 9536, 1204, 2739, 4793, 9011, 2131, 9101, 5811, 1251, 3922, 2145, 2471, 3284, 6383, 5821, 626, 982, 4611, 5355, 1198, 6096, 1490, 2886, 8778, 8709, 9587, 1059, 2071, 735, 7357, 3213, 8885, 2745, 9428, 1037, 7831, 570, 2738, 390, 2499, 1567, 8172, 1081, 7817, 7258, 5224, 7106, 1328, 2472, 8355, 5210, 5774, 8183, 9334, 8642, 3342, 45, 1363, 1533, 4967, 1412, 7228, 250};

int main() {
    int n = sizeof(TABELA) / sizeof(int);
    int najElement = maksimum(TABELA, n);
    Notranje** element2naslov = calloc(najElement + 1, sizeof(Notranje*));

    Notranje* zacetek = zgradi(TABELA, n, element2naslov);

    printf("Vhod: ");
    izpisiNotranje(zacetek);
    printf("\n");

    Zunanje* glava = porazdeli(zacetek, 7);

    printf("Izhod: ");
    izpisiZunanje(glava);
    printf("\n");

    printf("Istovetnost vozlisc: ");
    preveriIstovetnost(glava, element2naslov);
    printf("\n");

    pocistiZunanje(glava);
    free(element2naslov);
    return 0;
}
