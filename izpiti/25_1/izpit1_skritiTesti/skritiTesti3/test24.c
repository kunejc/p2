
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga3.h"

Notranje* zgradi(int* t, int n, Notranje** element2naslov) {
    Notranje* prvo = NULL;
    Notranje* zadnje = NULL;
    for (int i = 0; i < n; i++) {
        Notranje* v = calloc(1, sizeof(Notranje));
        v->podatek = t[i];
        element2naslov[v->podatek] = v;
        if (prvo == NULL) {
            prvo = zadnje = v;
        } else {
            zadnje->desno = v;
            zadnje = zadnje->desno;
        }
    }
    return prvo;
}

void izpisiNotranje(Notranje* zacetek) {
    printf("[");
    Notranje* v = zacetek;
    while (v != NULL) {
        if (v != zacetek) {
            printf(", ");
        }
        printf("%d", v->podatek);
        v = v->desno;
    }
    printf("]");
}

void izpisiZunanje(Zunanje* glava) {
    printf("[");
    Zunanje* v = glava;
    while (v != NULL) {
        if (v != glava) {
            printf(", ");
        }
        izpisiNotranje(v->prvo);
        v = v->dol;
    }
    printf("]");
}

void pocistiNotranje(Notranje* prvo) {
    Notranje* v = prvo;
    while (v != NULL) {
        Notranje* brisi = v;
        v = v->desno;
        free(brisi);
    }
}

void pocistiZunanje(Zunanje* glava) {
    Zunanje* v = glava;
    while (v != NULL) {
        pocistiNotranje(v->prvo);
        Zunanje* brisi = v;
        v = v->dol;
        free(brisi);
    }
}

int maksimum(int* t, int n) {
    int naj = 0;
    for (int i = 0; i < n; i++) {
        if (t[i] > naj) {
            naj = t[i];
        }
    }
    return naj;
}

void preveriIstovetnost(Zunanje* glava, Notranje** element2naslov) {
    Zunanje* z = glava;
    while (z != NULL) {
        Notranje* n = z->prvo;
        while (n != NULL) {
            printf("%d", element2naslov[n->podatek] == n);
            n = n->desno;
        }
        z = z->dol;
    }
}

int TABELA[] = {2124, 1932, 1808, 3427, 3399, 2669, 878, 373, 9208, 267, 6325, 5276, 6226, 2483, 7219, 9159, 8065, 8182, 5393, 9539, 3708, 8666, 8954, 9279, 8117, 64, 2391, 9561, 5939, 356, 1104, 7486, 3311, 8849, 3474, 7037, 7675, 7091, 7367, 998, 353, 6257, 9549, 1522, 4357, 2010, 8614, 1691, 4377, 578, 8015, 5696, 8191, 6056, 768, 2377, 9583, 7252, 5156, 1512, 1539, 4159, 5574, 7035, 1976, 3232, 7959, 8301, 1953, 6251, 9319, 1396, 4062, 3603, 3895, 7269, 2314, 4326, 6084, 56, 6748, 536, 3798, 9917, 4648, 3120, 7441, 432, 7954, 7737, 7097, 4805, 873, 3364, 186, 4501, 1666, 439, 9382, 3090, 1364, 1228, 5699, 8886, 7103, 5732, 5500, 8195, 5001, 6069, 8218, 8012, 169, 9139, 1030, 9152, 522, 7744, 7414, 4368, 2379, 6117, 133, 803, 9391, 5929, 860, 1715, 3785, 6209, 7498, 8467, 4601, 7163, 5261, 4857, 9190, 3035, 9037, 7943, 8224, 7192, 3946, 245, 6995, 5542, 7761, 2678, 5017, 3941, 3765, 6111, 6419, 4056, 9646, 2521, 6355, 193, 7020, 5404, 1240, 8896, 322, 4320, 9741, 4375, 8253, 4372, 5726, 5233, 2827, 8491, 9871, 7139, 7140, 4060, 1214, 9050, 3565, 9515, 1705, 8270, 4332, 8671, 3405, 4898, 7363, 6556, 1817, 4705, 4353, 9483, 3574, 5223, 5202, 9446, 290, 1571, 2920, 6207, 7894, 8783, 6608, 7645, 2047, 4344, 5950, 7026, 6110, 7329, 3467, 8529, 8137, 5837, 5590, 7275, 3216, 3538, 7857, 9920, 6004, 835, 5583, 7811, 5858, 3008, 6766, 2348, 2413, 8247, 8309, 2305, 7573, 4637, 4253, 5201, 3111, 9434, 5831, 584, 1575, 4632, 3789, 7405, 3210, 4546, 1173, 5229, 9433, 3183, 1569, 4732, 2285, 1443, 1121, 925, 5168, 9670, 8865, 5502, 8506, 9979, 9682, 4643, 4918, 4203, 4475, 1314, 2650, 2402, 1617, 8726, 5145, 614, 6868, 6911, 1110, 806, 4879, 1510, 3099, 9466, 9848, 3776, 3934, 1408, 9290, 176, 2898, 4875, 6009, 4763, 5506, 447, 2894, 3208, 8960, 9136, 471, 4257, 9430, 264, 1848, 5646, 9544, 5293, 207, 870, 826, 1789, 4482, 7298, 9971, 7842, 9079, 3080, 4384, 6386, 3826, 399, 5459, 2880, 8877, 2897, 970, 1271, 6729, 2672, 3880, 3822, 1218, 8653, 4355, 8363, 4998, 2955, 659, 8749, 2028, 5454, 769, 4063, 7058, 8800, 3667, 4218, 2232, 8415, 7056, 273, 4251, 3520, 9347, 4448, 2266, 3061, 5669, 7599, 1014, 4798, 4415, 2733, 6065, 2577, 2698, 8807, 7057, 3779, 8278, 674, 7897, 7185, 2087, 7374, 2122, 8078, 4143, 6524, 1257, 476, 3696, 1542, 2229, 6678, 1145, 6052, 3710, 8053, 8813, 1739, 110, 5847, 3761, 378, 7631, 1951, 3609, 1238, 4985, 8739, 7624, 5047, 6599, 8495, 5855, 3657, 9057, 2289, 2796, 7659, 9300, 7949, 7182, 1636, 2752, 8772, 7910, 5908, 9988, 8818, 3303, 5938, 8493, 2315, 1674, 2509, 2595, 8181, 4305, 7353, 3418, 8287, 478, 3562, 6727, 7082, 187, 6577, 2911, 7611, 501, 7516, 8255, 9874, 1161, 9022, 2273, 7407, 3948, 9133, 6429, 9449, 9832, 6006, 3015, 5734, 9559, 8784, 8233, 537, 7929, 7313, 603, 7306, 1598, 9284, 8234, 6077, 4001, 3894, 2840, 3243, 921, 1247, 8353, 5342, 6334, 3527, 1525, 7935, 5237, 7296, 8408, 6978, 5561, 2076, 7831, 4386, 9375, 4043, 8762, 1517, 8332, 5132, 1650, 7429, 255, 6139, 9935, 8756, 363, 1473, 4276, 6067, 5861, 2052, 8891, 1646, 8447, 148, 1002, 7362, 1290, 4823, 8503, 7302, 5329, 1849, 4041, 3229, 219, 4281, 2701, 9803, 7589, 4379, 1748, 502, 4815, 9301, 6548, 422, 9096, 2442, 8042, 3212, 6921, 3483, 9928, 3850, 9068, 7746, 8343, 9763, 8985, 4964, 2461, 4142, 5834, 7577, 6494, 9881, 9413, 9180, 2745, 18, 7272, 2683, 4587, 4065, 8674, 4930, 4973, 1297, 4166, 1337, 4215, 5593, 2570, 5537, 5080, 740, 2070, 2670, 6640, 6034, 9198, 2777, 2857, 4521, 9197, 5751, 5392, 4552, 1741, 3533, 5576, 5185, 7491, 7456, 7358, 7317, 5738, 2573, 575, 8588, 1348, 4454, 3387, 2666, 3280, 9745, 4008, 3808, 2590, 7169, 564, 7179, 2881, 7243, 5400, 6283, 5800, 231, 4988, 1630, 171, 5759, 7036, 9324, 178, 8424, 9520, 8602, 3157, 1651, 6149, 7544, 6510, 558, 3037, 7143, 4426, 4323, 1261, 4715, 4419, 9717, 4307, 7455, 8765, 1040, 3674, 2100, 1840, 4473, 3021, 4126, 5417, 1766, 7968, 8444, 626, 6721, 2436, 9781, 4954, 1356, 971, 8998, 2445, 2832, 8949, 3100, 7534, 1189, 66, 602, 1870, 8938, 3632, 8924, 1281, 2104, 6789, 1183, 1393, 2838, 4588, 4590, 2721, 6994, 8109, 8621, 7464, 1550, 6815, 4575, 6441, 1035, 5141, 6023, 8936, 3663, 8530, 6811, 2058, 9271, 8000, 8351, 8794, 3491, 7794, 9853, 349, 7225, 999, 9700, 7915, 5572, 9445, 7474, 4157, 1112, 9188, 9667, 8874, 7777, 2732, 7402, 1601, 4340, 4486, 9137, 3376, 573, 2930, 8683, 4835, 1536, 7511, 6820, 1677, 8744, 2356, 1308, 7002, 1384, 4158, 2417, 8305, 1239, 4517, 1209, 3530, 3249, 2378, 5683, 7217, 4177, 5380, 6928, 7299, 6341, 1893, 5183, 8285, 1235, 553, 7350, 9931, 5898, 299, 6858, 1889, 149, 2092, 2606, 3038, 4518, 68, 2594, 3341, 3184, 8492, 201, 8299, 9959, 2162, 3815, 2585, 7825, 6776, 1028, 638, 3470, 8179, 7876, 9835, 5840, 5873, 5653, 4573, 5426, 210, 8061, 6733, 8, 205, 4702, 6575, 128, 9398, 8536, 8365, 4525, 515, 8511, 5714, 5689, 7733, 6817, 2779, 6518, 5553, 3072, 6645, 5672, 4639, 8539, 4515, 2359, 9196, 3476, 3320, 557, 2151, 7640, 7112, 7680, 7200, 9987, 3101, 9842, 1344, 6267, 5475, 4532, 7148, 4675, 3370, 5670, 5531, 7880, 5712, 1910, 4314, 2404, 6848, 9659, 713, 2344, 5888, 7586, 4710, 8018, 9796, 1153, 6375, 4035, 1937, 9824, 5063, 7707, 3098, 5828, 9695, 262, 5700, 3227, 4160, 1080, 7090, 4716, 5269, 8551, 1126, 6012, 6684, 7230, 5402, 8676, 4076, 7661, 6680, 1614, 7251, 1764, 8857, 6088, 6239, 9701, 986, 9285, 7108, 6628, 7502, 5421, 1751, 6983, 648, 453, 3172, 2406, 3454, 7094, 7153, 1103, 3289, 7240, 4207, 4195, 7867, 8748, 2549, 7409, 4703, 6804, 1435, 8664, 3383, 6899, 1743, 5248, 2368, 6488, 7033, 2452, 4493, 9978, 5016, 5515, 8487, 9526, 5375, 8643, 7406, 8316, 6962, 1875, 4872, 8171, 5600, 7976, 1641, 7505, 9407, 2579, 2150, 4191, 7351, 8940, 9870, 140, 6467, 787, 9511, 6697, 8659, 7923, 7898, 8480, 3240, 509, 3287, 5632, 2952, 8604, 5662, 1632, 9239, 6657, 6933, 3154, 4915, 7109, 892, 311};

int main() {
    int n = sizeof(TABELA) / sizeof(int);
    int najElement = maksimum(TABELA, n);
    Notranje** element2naslov = calloc(najElement + 1, sizeof(Notranje*));

    Notranje* zacetek = zgradi(TABELA, n, element2naslov);

    printf("Vhod: ");
    izpisiNotranje(zacetek);
    printf("\n");

    Zunanje* glava = porazdeli(zacetek, 976);

    printf("Izhod: ");
    izpisiZunanje(glava);
    printf("\n");

    printf("Istovetnost vozlisc: ");
    preveriIstovetnost(glava, element2naslov);
    printf("\n");

    pocistiZunanje(glava);
    free(element2naslov);
    return 0;
}
