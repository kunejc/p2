
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga3.h"

Notranje* zgradi(int* t, int n, Notranje** element2naslov) {
    Notranje* prvo = NULL;
    Notranje* zadnje = NULL;
    for (int i = 0; i < n; i++) {
        Notranje* v = calloc(1, sizeof(Notranje));
        v->podatek = t[i];
        element2naslov[v->podatek] = v;
        if (prvo == NULL) {
            prvo = zadnje = v;
        } else {
            zadnje->desno = v;
            zadnje = zadnje->desno;
        }
    }
    return prvo;
}

void izpisiNotranje(Notranje* zacetek) {
    printf("[");
    Notranje* v = zacetek;
    while (v != NULL) {
        if (v != zacetek) {
            printf(", ");
        }
        printf("%d", v->podatek);
        v = v->desno;
    }
    printf("]");
}

void izpisiZunanje(Zunanje* glava) {
    printf("[");
    Zunanje* v = glava;
    while (v != NULL) {
        if (v != glava) {
            printf(", ");
        }
        izpisiNotranje(v->prvo);
        v = v->dol;
    }
    printf("]");
}

void pocistiNotranje(Notranje* prvo) {
    Notranje* v = prvo;
    while (v != NULL) {
        Notranje* brisi = v;
        v = v->desno;
        free(brisi);
    }
}

void pocistiZunanje(Zunanje* glava) {
    Zunanje* v = glava;
    while (v != NULL) {
        pocistiNotranje(v->prvo);
        Zunanje* brisi = v;
        v = v->dol;
        free(brisi);
    }
}

int maksimum(int* t, int n) {
    int naj = 0;
    for (int i = 0; i < n; i++) {
        if (t[i] > naj) {
            naj = t[i];
        }
    }
    return naj;
}

void preveriIstovetnost(Zunanje* glava, Notranje** element2naslov) {
    Zunanje* z = glava;
    while (z != NULL) {
        Notranje* n = z->prvo;
        while (n != NULL) {
            printf("%d", element2naslov[n->podatek] == n);
            n = n->desno;
        }
        z = z->dol;
    }
}

int TABELA[] = {9273, 3589, 3399, 9038, 298, 3121, 864, 5424, 1098, 1601, 9671, 1440, 8635, 7956, 345, 5380, 5691, 3036, 8809, 4439, 3763, 4257, 5023, 7257, 6089, 4282, 8139, 4662, 6263, 6675, 3167, 6174, 5958, 6154, 3504, 3837, 7914, 3748, 2277, 7551, 8330, 8381, 225, 7546, 7789, 5251, 1892, 8674, 5324, 8433, 9711, 4641, 801, 2917, 4487, 9702, 8852, 9280, 4477, 7538, 9983, 3438, 6755, 4041, 9716, 5797, 36, 9018, 5489, 2478, 7666, 5046, 1353, 8935, 7657, 1467, 9258, 2129, 1002, 7438, 3656, 4866, 5401, 8799, 8742, 287, 2070, 3562, 6312, 4890, 4377, 1100, 5178, 378, 3495, 2083, 4037, 2365, 2674, 2043, 2040, 1543, 3252, 2996, 2448, 2176, 1576, 1876, 1846, 9712, 1192, 1047, 2988, 8092, 7839, 70, 7910, 1919, 3553, 3686, 8708, 6440, 6467, 3639, 6283, 4635, 3008, 3139, 7500, 3840, 5912, 5071, 4312, 2642, 5483, 9952, 5247, 5172, 3586, 1006, 1816, 3768, 5598, 1172, 1040, 2838, 2020, 8713, 2591, 4297, 7410, 3436, 2090, 4014, 3089, 4495, 1762, 3654, 738, 3929, 7450, 6874, 538, 379, 5987, 5114, 8680, 3015, 7674, 1948, 2741, 628, 3966, 9874, 7339, 1825, 3178, 994, 2791, 8037, 2517, 7662, 7643, 5740, 6181, 1526, 6784, 171, 3829, 774, 6476, 8821, 6738, 6521, 6986, 8802, 8119, 5701, 1721, 1771, 113, 9849, 4310, 6873, 2235, 6453, 5615, 6364, 1829, 7563, 8583, 6441, 6825, 554, 3692, 4818, 7949, 7607, 8070, 8389, 341, 2983, 2273, 93, 337, 567, 8413, 5257, 402, 241, 2620, 4505, 997, 1642, 5610, 8307, 2974, 813, 9577, 9921, 3372, 6778, 2721, 6777, 6141, 8504, 2512, 1273, 2858, 3594, 3950, 2828, 9544, 2497, 9720, 5542, 5272, 3659, 5493, 8590, 7304, 9871, 1133, 4004, 7177, 6226, 3963, 2255, 8671, 3445, 5754, 6259, 615, 6110, 5296, 9249, 5511, 2019, 503, 8952, 8883, 7265, 1039, 5727, 6401, 7283, 4209, 3890, 4598, 9571, 456, 933, 3687, 7328, 9137, 4953, 1652, 7420, 7762, 4408, 3823, 8493, 7616, 2454, 3930, 8895, 9451, 4846, 719, 2552, 555, 8925, 1042, 7799, 5985, 1196, 1215, 7333, 8906, 4272, 1035, 6832, 7975, 8820, 8830, 8575, 9714, 2852, 1032, 1137, 9035, 5677, 7394, 3250, 9763, 3895, 2147, 6068, 4875, 8734, 8912, 1572, 8340, 9558, 3665, 5893, 9875, 462, 9325, 9404, 6011, 7025, 4947, 6157, 3296, 3384, 7284, 9676, 1449, 1315, 2172, 1238, 9685, 7765, 8818, 4119, 4198, 8673, 3819, 2446, 873, 4763, 9592, 6227, 9959, 7491, 4898, 9963, 482, 5479, 9315, 8787, 5596, 5908, 4617, 1511, 9876, 3358, 4293, 1460, 28, 750, 1989, 4186, 3984, 342, 4089, 4748, 7982, 3778, 7571, 9306, 4284, 1316, 8546, 1169, 202, 9154, 210, 2496, 300, 4102, 761, 4566, 4896, 9078, 9054, 6246, 269, 4260, 6685, 6692, 128, 7595, 5976, 4834, 4002, 2816, 3764, 6810, 8408, 8226, 4855, 7794, 2783, 8174, 8187, 1784, 9437, 9488, 3587, 8480, 9769, 9692, 3741, 6483, 6294, 5894, 9573, 373, 8868, 163, 7380, 608, 5196, 1433, 2872, 682, 7779, 1717, 3081, 280, 5919, 2423, 2042, 6817, 5317, 2132, 7384, 7360, 5806, 4072, 5857, 4109, 1738, 4794, 1165, 5690, 8362, 2100, 2073, 6079, 5124, 8020, 5355, 7484, 930, 5335, 769, 2543, 3449, 5285, 5982, 1756, 4298, 2533, 284, 1021, 3432, 5937, 5580, 7918, 2186, 8143, 3306, 2557, 4250, 7062, 7532, 7998, 9829, 4622, 6998, 5455, 4557, 5993, 5092, 5115, 4240, 264, 2765, 205, 8572, 1819, 8003, 6328, 3828, 7271, 5369, 4459, 3652, 5880, 8215, 8060, 4291, 3575, 698, 1797, 5310, 9672, 8913, 4920, 1488, 4097, 8928, 5286, 3621, 3608, 817, 1142, 7152, 5787, 6769, 1742, 4259, 5100, 9730, 9014, 9127, 4625, 5456, 3886, 5930, 5685, 3328, 1324, 9880, 5779, 1495, 7668, 4189, 316, 1929, 7364, 9891, 64, 6658, 8014, 8209, 3848, 1444, 8543, 3898, 5698, 3799, 6085, 4595, 2191, 3910, 8477, 8881, 6307, 51, 1843, 5240, 8294, 522, 4433, 2065, 9508, 3184, 4711, 3214, 6828, 5175, 5337, 751, 9085, 4454, 9557, 6883, 4870, 303, 4661, 9830, 6831, 4370, 5407, 8896, 7222, 5081, 6075, 7833, 2520, 5684, 1647, 2048, 9053, 9982, 1577, 7638, 8902, 1909, 627, 2635, 1474, 4007, 1386, 1073, 9832, 9726, 8375, 4161, 185, 6395, 8855, 91, 1725, 3866, 9201, 4869, 1442, 3645, 8175, 2058, 3420, 908, 3874, 9961, 9228, 5443, 116, 6293, 9789, 454, 1117, 3204, 2856, 246, 8494, 5680, 5566, 2747, 8138, 6545, 6555, 140, 3005, 419, 2553, 1462, 1730, 5016, 2440, 8102, 647, 2247, 6944, 9616, 5996, 4389, 808, 5519, 8212, 6715, 1321, 7909, 4909, 8407, 7509, 6097, 886, 1759, 7140, 4017, 5327, 4621, 2224, 1475, 2776, 9388, 5791, 3113, 1408, 713, 7323, 3365, 311, 6094, 455, 4325, 8644, 6547, 8582, 775, 706, 6859, 8643, 6701, 3905, 3002, 9344, 7279, 6423, 3068, 1464, 2880, 8429, 2156, 8100, 8201, 1805, 6177, 4687, 5387, 9697, 1483, 4402, 3881, 4099, 3954, 3685, 2867, 3900, 477, 9209, 9587, 8, 315, 1095, 7270, 7584, 5145, 4888, 8051, 918, 3448, 3939, 9654, 7842, 9182, 6530, 4205, 8387, 9239, 218, 6567, 5204, 8454, 441, 4421, 792, 1312, 7959, 6993, 1700, 1120, 9864, 2452, 3021, 5353, 9886, 9302};

int main() {
    int n = sizeof(TABELA) / sizeof(int);
    int najElement = maksimum(TABELA, n);
    Notranje** element2naslov = calloc(najElement + 1, sizeof(Notranje*));

    Notranje* zacetek = zgradi(TABELA, n, element2naslov);

    printf("Vhod: ");
    izpisiNotranje(zacetek);
    printf("\n");

    Zunanje* glava = porazdeli(zacetek, 446);

    printf("Izhod: ");
    izpisiZunanje(glava);
    printf("\n");

    printf("Istovetnost vozlisc: ");
    preveriIstovetnost(glava, element2naslov);
    printf("\n");

    pocistiZunanje(glava);
    free(element2naslov);
    return 0;
}
