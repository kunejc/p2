
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga3.h"

Notranje* zgradi(int* t, int n, Notranje** element2naslov) {
    Notranje* prvo = NULL;
    Notranje* zadnje = NULL;
    for (int i = 0; i < n; i++) {
        Notranje* v = calloc(1, sizeof(Notranje));
        v->podatek = t[i];
        element2naslov[v->podatek] = v;
        if (prvo == NULL) {
            prvo = zadnje = v;
        } else {
            zadnje->desno = v;
            zadnje = zadnje->desno;
        }
    }
    return prvo;
}

void izpisiNotranje(Notranje* zacetek) {
    printf("[");
    Notranje* v = zacetek;
    while (v != NULL) {
        if (v != zacetek) {
            printf(", ");
        }
        printf("%d", v->podatek);
        v = v->desno;
    }
    printf("]");
}

void izpisiZunanje(Zunanje* glava) {
    printf("[");
    Zunanje* v = glava;
    while (v != NULL) {
        if (v != glava) {
            printf(", ");
        }
        izpisiNotranje(v->prvo);
        v = v->dol;
    }
    printf("]");
}

void pocistiNotranje(Notranje* prvo) {
    Notranje* v = prvo;
    while (v != NULL) {
        Notranje* brisi = v;
        v = v->desno;
        free(brisi);
    }
}

void pocistiZunanje(Zunanje* glava) {
    Zunanje* v = glava;
    while (v != NULL) {
        pocistiNotranje(v->prvo);
        Zunanje* brisi = v;
        v = v->dol;
        free(brisi);
    }
}

int maksimum(int* t, int n) {
    int naj = 0;
    for (int i = 0; i < n; i++) {
        if (t[i] > naj) {
            naj = t[i];
        }
    }
    return naj;
}

void preveriIstovetnost(Zunanje* glava, Notranje** element2naslov) {
    Zunanje* z = glava;
    while (z != NULL) {
        Notranje* n = z->prvo;
        while (n != NULL) {
            printf("%d", element2naslov[n->podatek] == n);
            n = n->desno;
        }
        z = z->dol;
    }
}

int TABELA[] = {3010, 9292, 7754, 5269, 6552, 6885, 1419, 8900, 2520, 7403, 6690, 1847, 1870, 4244, 3328, 9449, 2599, 6849, 1845, 5971, 2526, 2078, 2311, 4882, 5837, 4542, 9559, 8218, 4572, 7832, 1711, 6781, 6644, 8266, 771, 248, 2293, 9303, 4669, 435, 4338, 9372, 647, 5921, 7750, 6519, 5305, 6040, 1793, 3442, 1844, 1446, 1526, 2789, 8790, 1661, 3653, 7589, 7011, 4205, 4345, 9376, 2683, 7766, 5819, 1173, 9115, 499, 4194, 6623, 1159, 1042, 9521, 3129, 7791, 2081, 2018, 2987, 4637, 4102, 8761, 4823, 7887, 5682, 2836, 7836, 182, 5267, 7767, 3915, 2461, 3655, 6925, 639, 4174, 4516, 406, 8010, 4912, 1798, 1962, 5016, 7823, 546, 3683, 7862, 6475, 964, 8536, 7771, 144, 3002, 6902, 3673, 8295, 5658, 438, 8235, 1611, 8827, 7057, 3075, 9897, 7101, 2969, 87, 7152, 8186, 5907, 4071, 2124, 4978, 2924, 5565, 5238, 9617, 7946, 2147, 6148, 6139, 5099, 8779, 8537, 3528, 9840, 3269, 1054, 299, 528, 3114, 7672, 4317, 6782, 4881, 3699, 5754, 6461, 9690, 1177, 8330, 9271, 3798, 308, 8360, 9820, 9808, 8477, 5771, 5821, 80, 1233, 2118, 2343, 3649, 950, 4326, 8958, 2818, 6912, 9974, 7013, 9562, 272, 8025, 5923, 8652, 5704, 5030, 653, 8590, 202, 3745, 4844, 1137, 621, 7877, 4286, 9438, 5528, 4511, 6457, 1494, 4019, 4966, 8648, 6911, 3070, 3675, 1010, 7724, 2866, 4201, 2607, 2481, 6531, 3614, 6564, 2884, 7598, 8836, 9975, 6022, 9489, 572, 7489, 4498, 9510, 970, 7712, 5747, 3431, 6662, 9486, 5600, 8864, 9325, 3896, 1921, 1743, 7040, 7248, 9556, 510, 4415, 3375, 705, 2306, 1039, 5337, 8681, 6, 2686, 2758, 6553, 5964, 1754, 11, 3552, 3872, 3127, 9058, 4213, 617, 9943, 7302, 6434, 2808, 5013, 3448, 7435, 7881, 951, 2810, 7545, 8019, 2050, 6296, 6282, 2459, 4953, 7172, 4825, 3359, 364, 424, 1499, 8284, 7893, 1406, 3779, 8269, 5569, 5945, 1, 8264, 348, 4414, 9328, 345, 7667, 3350, 4807, 896, 6408, 8280, 5578, 2386, 7780, 3423, 7169, 7682, 9112, 8027, 4388, 5839, 7503, 4029, 6587, 990, 3757, 3092, 5222, 6442, 1095, 561, 2180, 5280, 5390, 8612, 4427, 1718, 2723, 2341, 1671, 2794, 7856, 8839, 6057, 4515, 9767, 8914, 426, 7613, 8866, 2314, 6030, 8283, 5513, 881, 7293, 8759, 1331, 9424, 3705, 3545, 4471, 7104, 3817, 9010, 493, 33, 9463, 4, 5818, 2186, 1810, 2409, 9888, 877, 7431, 2713, 1627, 1694, 4929, 3992, 7532, 4235, 9911, 8598, 210, 7820, 2782, 3223, 5967, 4913, 1787, 3139, 7486, 3517, 8600, 1849, 6488, 1762, 12, 6281, 6342, 4595, 5241, 5031, 1664, 7518, 8973, 8921, 1162, 2169, 7704, 955, 8534, 3432, 8060, 9557, 3246, 6286, 3486, 2645, 9128, 4094, 6167, 2185, 5196, 1369, 2829, 3916, 3280, 8078, 6467, 2494, 184, 5111, 6682, 187, 3761, 1780, 4984, 2254, 4253, 2891, 4292, 5325, 6150, 9784, 5859, 7059, 5295, 3786, 2697, 7084, 6629, 7608, 7204, 2955, 8734, 7972, 9134, 8109, 8643, 1973, 7844, 3404, 4299, 6204, 5002, 1219, 977, 8000, 2999, 6756, 4251, 6806, 9268, 1259, 9355, 8216, 3820, 3852, 3168, 5852, 7017, 9483, 173, 8438, 996, 4556, 4134, 6262, 3506, 5671, 9830, 3581, 3713, 2109, 1565, 6698, 6999, 4404, 5273, 6303, 4074, 3156, 8863, 6133, 8578, 9674, 5925, 4859, 6099, 520, 1366, 8493, 6017, 616, 9503, 9665, 9719, 4577, 4906, 9964, 5416, 1998, 3776, 7343, 6640, 6821, 3221, 3782, 6744, 811, 3904, 3392, 9737, 238, 6369, 2079, 4125, 5211, 6002, 1963, 4333, 3952, 7552, 2616, 9385, 3862, 6420, 8239, 1460, 9185, 333, 9566, 7572, 2864, 564, 8925, 4350, 3147, 2448, 4353, 985, 5358, 1116, 4225, 7728, 487, 8090, 9711, 1362, 742, 3739, 1620, 7479, 1958, 7142, 5200, 3078, 1539, 7332, 4146, 2889, 1204, 7442, 691, 9894, 7878, 6271, 9918, 9882, 682, 7810, 7689, 8800, 9639, 1783, 5447, 7534, 3606, 1632, 8570, 3522, 5807, 7684, 6996, 7197, 7039, 3245, 6031, 7542, 2113, 3989, 9184, 7417, 2521, 2039, 4343, 8854, 9309, 3766, 501, 5721, 5455, 247, 4620, 8870, 7232, 4544, 4998, 1524, 8660, 5126, 5951, 6047, 5427, 9049, 2908, 1413, 3315, 4716, 9532, 8113, 3378, 3335, 1072, 1171, 1158, 7350, 3292, 9622, 1851, 2707, 7985, 3306, 1650, 7744, 5403, 3910, 2478, 1187, 1385, 9530, 503, 2566, 719, 1325, 9832, 3690, 8142, 8939, 2477, 3346, 7268, 1616, 2233, 2423, 2226, 1906, 9896, 6459, 7521, 6987, 3100, 2847, 7009, 3308, 1123, 5434, 7181, 1794, 4246, 3110, 5296, 1904, 9836, 6802, 8065, 2803, 855, 6899, 7968, 1537, 9926, 3289, 4600, 2334, 1952, 7757, 3460, 7784, 4465};

int main() {
    int n = sizeof(TABELA) / sizeof(int);
    int najElement = maksimum(TABELA, n);
    Notranje** element2naslov = calloc(najElement + 1, sizeof(Notranje*));

    Notranje* zacetek = zgradi(TABELA, n, element2naslov);

    printf("Vhod: ");
    izpisiNotranje(zacetek);
    printf("\n");

    Zunanje* glava = porazdeli(zacetek, 5);

    printf("Izhod: ");
    izpisiZunanje(glava);
    printf("\n");

    printf("Istovetnost vozlisc: ");
    preveriIstovetnost(glava, element2naslov);
    printf("\n");

    pocistiZunanje(glava);
    free(element2naslov);
    return 0;
}
