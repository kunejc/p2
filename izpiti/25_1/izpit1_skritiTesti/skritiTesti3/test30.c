
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga3.h"

Notranje* zgradi(int* t, int n, Notranje** element2naslov) {
    Notranje* prvo = NULL;
    Notranje* zadnje = NULL;
    for (int i = 0; i < n; i++) {
        Notranje* v = calloc(1, sizeof(Notranje));
        v->podatek = t[i];
        element2naslov[v->podatek] = v;
        if (prvo == NULL) {
            prvo = zadnje = v;
        } else {
            zadnje->desno = v;
            zadnje = zadnje->desno;
        }
    }
    return prvo;
}

void izpisiNotranje(Notranje* zacetek) {
    printf("[");
    Notranje* v = zacetek;
    while (v != NULL) {
        if (v != zacetek) {
            printf(", ");
        }
        printf("%d", v->podatek);
        v = v->desno;
    }
    printf("]");
}

void izpisiZunanje(Zunanje* glava) {
    printf("[");
    Zunanje* v = glava;
    while (v != NULL) {
        if (v != glava) {
            printf(", ");
        }
        izpisiNotranje(v->prvo);
        v = v->dol;
    }
    printf("]");
}

void pocistiNotranje(Notranje* prvo) {
    Notranje* v = prvo;
    while (v != NULL) {
        Notranje* brisi = v;
        v = v->desno;
        free(brisi);
    }
}

void pocistiZunanje(Zunanje* glava) {
    Zunanje* v = glava;
    while (v != NULL) {
        pocistiNotranje(v->prvo);
        Zunanje* brisi = v;
        v = v->dol;
        free(brisi);
    }
}

int maksimum(int* t, int n) {
    int naj = 0;
    for (int i = 0; i < n; i++) {
        if (t[i] > naj) {
            naj = t[i];
        }
    }
    return naj;
}

void preveriIstovetnost(Zunanje* glava, Notranje** element2naslov) {
    Zunanje* z = glava;
    while (z != NULL) {
        Notranje* n = z->prvo;
        while (n != NULL) {
            printf("%d", element2naslov[n->podatek] == n);
            n = n->desno;
        }
        z = z->dol;
    }
}

int TABELA[] = {2551, 3697, 3584, 7522, 8678, 962, 3599, 9351, 6000, 9481, 5108, 3676, 8780, 6838, 5164, 8134, 8183, 1934, 2954, 3094, 467, 8801, 4987, 9055, 9610, 9749, 441, 6273, 9, 3712, 3772, 8163, 9640, 7355, 9023, 5752, 5547, 2022, 7152, 4343, 1265, 6821, 3877, 9308, 4949, 2123, 9292, 1219, 2108, 4807, 379, 3884, 4838, 7908, 5523, 9879, 1863, 6037, 4398, 3544, 6515, 667, 7655, 686, 3709, 5142, 3268, 4549, 1071, 3474, 3732, 6230, 310, 4925, 1391, 3531, 5740, 9765, 4032, 3646, 6927, 1541, 2207, 2170, 538, 6590, 5022, 9928, 5206, 2258, 2652, 7801, 5974, 7403, 3482, 8094, 5425, 7704, 2061, 8153, 8981, 8535, 4364, 7741, 2460, 5234, 5033, 2422, 3692, 8911, 6079, 3339, 3378, 9833, 1440, 8346, 4495, 7765, 2811, 7398, 5219, 5297, 9604, 3411, 7289, 7194, 5203, 3776, 3311, 3473, 4605, 4431, 8849, 4752, 9131, 3138, 6105, 8758, 8739, 6234, 5184, 5584, 4644, 6719, 7247, 8446, 5888, 2300, 1774, 6289, 6940, 5000, 9660, 6314, 415, 4355, 4675, 4093, 5233, 7114, 6618, 6988, 8494, 2264, 2550, 8772, 5833, 7894, 9226, 3668, 893, 8862, 6665, 3687, 9529, 6416, 6612, 8182, 94, 3088, 6551, 1973, 5681, 5274, 4931, 7589, 5781, 2114, 6112, 2865, 921, 737, 6931, 6529, 3313, 9596, 2043, 445, 1695, 5515, 2684, 1116, 904, 9034, 1644, 3119, 1051, 3338, 7791, 4140, 9732, 9434, 978, 9253, 8178, 2015, 4880, 1276, 2062, 2235, 2465, 2803, 7482, 3258, 5903, 335, 11, 596, 9540, 5944, 3072, 9242, 9373, 145, 1598, 6370, 157, 6228, 5041, 7919, 1240, 4183, 7087, 6090, 7027, 1887, 5061, 4904, 5356, 5094, 3506, 6727, 5389, 8953, 7160, 6527, 79, 6819, 1752, 2677, 7819, 6547, 3644, 5717, 5657, 528, 1636, 2178, 1105, 6161, 668, 6023, 9744, 3904, 4360, 5281, 8989, 7163, 5104, 6796, 6024, 7814, 7245, 372, 2423, 5780, 1011, 5534, 727, 1347, 9389, 5446, 4144, 5679, 6132, 8128, 8019, 4334, 4019, 1742, 9368, 7123, 2979, 3802, 2079, 4414, 7993, 9102, 2648, 8644, 4511, 4054, 6363, 8656, 9289, 8285, 1296, 3395, 2413, 9816, 5252, 6631, 5498, 9544, 9187, 5634, 6724, 2408, 6066, 4302, 4943, 632, 8162, 7385, 4476, 6853, 2670, 5439, 9126, 4830, 2573, 3520, 3372, 5195, 3454, 871, 8948, 2938, 85, 508, 1061, 3131, 8173, 8018, 9114, 9012, 6389, 8850, 8899, 6077, 388, 2117, 5113, 2676, 3032, 9105, 1781, 9320, 5565, 6813, 3478, 1141, 2094, 6470, 8510, 153, 5048, 5788, 3113, 3409, 4711, 6082, 9548, 439, 4927, 3825, 7661, 706, 6996, 2986, 2933, 5704, 8572, 3373, 1389, 497, 4082, 8362, 9257, 3638, 2968, 9262, 5557, 9436, 839, 9609, 4940, 3943, 5793, 9038, 1694, 7015, 8922, 3824, 5426, 5466, 9429, 3656, 6233, 232, 7743, 3513, 8913, 2457, 1833, 3019, 9850, 5764, 7739, 8884, 4746, 9834, 3661, 5476, 4829, 1019, 6397, 4448, 3974, 7762, 5177, 1436, 7330, 5713, 5877, 8459, 8880, 5664, 6556, 213, 1266, 5924, 3210, 4901, 7150, 4326, 8870, 5631, 9070, 2601, 9502, 4170, 3414, 6712, 8464, 8625, 4062, 3637, 5213, 3175, 7229, 4547, 7023, 1345, 5392, 6160, 3979, 3932, 2520, 5422, 2029, 5711, 5913, 5926, 4249, 5838, 3894, 1200, 3594, 8023, 1517, 3168, 4542, 9781, 1929, 7800, 5613, 8689, 8190, 9337, 5, 1743, 1134, 5907, 2333, 5098, 2151, 5759, 4393, 4714, 3003, 8160, 8523, 8258, 368, 1864, 3162, 1744, 2770, 4241, 9299, 8701, 7205, 3647, 7097, 9338, 5431, 7882, 6797, 6133, 9627, 665, 6658, 2177, 473, 6129, 9344, 5748, 6806, 9599, 4707, 4147, 5733, 1736, 7080, 1789, 1977, 3754, 8222, 4527, 6593, 8757, 5980, 3580, 5020, 5815, 461, 6130, 356, 3438, 7558, 3623, 6651, 95, 5842, 5973, 3202, 6826, 4851, 7782, 6659, 5680, 2734, 2556, 9723, 9997, 8391, 5672, 994, 3405, 1306, 370, 8077, 3598, 7012, 6966, 5917, 8642, 7198, 8702, 4534, 5765, 5851, 8916, 4622, 5003, 7177, 8052, 8387, 2452, 1327, 7505, 5770, 1023, 5478, 3499, 934, 6570, 7336, 6021, 5668, 9688, 1295, 9384, 1241, 5510, 6475, 254, 9736, 7627, 5078, 5200, 3907, 9590, 4771, 2399, 1292, 549, 8930, 5128, 7358, 5089, 6153, 6143, 9957, 3842, 1341, 6207, 7113, 6766, 9675, 9867, 3166, 8336, 1258, 7909, 8209, 4024, 330, 4884, 2163, 6062, 9149, 5975, 1308, 3773, 8785, 1602, 1750, 3621, 3201, 7602, 8140, 1354, 7265, 2854, 6364, 9619, 7333, 2612, 1788, 4756, 6961, 587, 109, 8341, 3144, 4677, 1086, 1216, 5028, 2554, 7729, 3539, 9441, 5992, 6102, 7973, 9591, 993, 3961, 7567, 646, 8242, 4122, 1290, 7394, 3721, 3377, 6986, 1342, 1568, 3036, 4380, 2987, 3154, 7953, 571, 6484, 4009, 1293, 2272, 5090, 3451, 6740, 6871, 9549, 2419, 7485, 1918, 2200, 5738, 1427, 3640, 6653, 625, 9764, 6375, 5334, 3576, 9209, 7224, 9914, 8383, 9831, 1115, 6874, 231, 9125, 6126, 1898, 9861, 660, 524, 8382, 6844, 2908, 7793, 6212, 6113, 7714, 8747, 821, 2330, 6009, 2269, 8031, 7007, 1856, 9803, 7642, 4954, 2240, 1432, 2818, 9557, 9779, 5895, 9977, 3819, 167, 1350, 6012, 2622, 9399, 1091, 502, 5578, 2587, 1914, 406, 8385, 5644, 9911, 3937, 3020, 9324, 344, 8501, 2647, 5346, 9305, 1365, 2935, 6850, 6014, 1337, 2710, 8802, 5239, 6851, 7915, 3475, 4543, 5136, 1504, 6469, 7437, 9358, 8373, 2635, 5824, 9179, 8041, 3058, 3769, 306, 9391, 2748, 3875, 9526, 5110, 9430, 9287, 5692, 4408, 7951, 7536, 6743, 3771, 7472, 2490, 7046, 2575, 527, 8319, 1162, 1803, 7240, 1040, 8918, 3522, 6072, 965, 4368, 5862, 1892, 5558, 2952, 6969, 5527, 7977, 6841, 6975, 7648, 7537, 8944, 9087, 6196, 2527, 6468, 7374, 455, 5002, 1263, 280, 9705, 6639, 6214, 8493, 8012, 1425, 726, 8105, 3421, 8537, 6657, 924, 8254, 7050, 0, 1968, 8557, 2453, 9107, 7554, 5482, 674, 4926, 4076, 9426, 9031, 7667, 260, 3205, 1845, 9400, 1173, 2140, 183, 6373, 7457, 6897, 6025, 3641, 5927, 630, 6887, 5272, 7986, 4554, 5978, 4508, 498, 5950, 3921, 8566, 3244, 4456, 7196, 6810, 8189, 5968, 9769, 3657, 7004, 8540, 8573, 6643, 492, 8643, 3545, 3344, 4098, 5162, 7107, 2974, 7781, 4283, 6982, 1340, 2074, 6638, 693, 3510, 5542, 7598, 5779, 1351, 5057, 326, 8451, 9375, 7911, 7331, 51, 5210, 6285, 7112, 6970, 3176, 4580, 7988, 1904, 3826, 4764, 7514, 5154, 1033, 3535, 4941};

int main() {
    int n = sizeof(TABELA) / sizeof(int);
    int najElement = maksimum(TABELA, n);
    Notranje** element2naslov = calloc(najElement + 1, sizeof(Notranje*));

    Notranje* zacetek = zgradi(TABELA, n, element2naslov);

    printf("Vhod: ");
    izpisiNotranje(zacetek);
    printf("\n");

    Zunanje* glava = porazdeli(zacetek, 948);

    printf("Izhod: ");
    izpisiZunanje(glava);
    printf("\n");

    printf("Istovetnost vozlisc: ");
    preveriIstovetnost(glava, element2naslov);
    printf("\n");

    pocistiZunanje(glava);
    free(element2naslov);
    return 0;
}
