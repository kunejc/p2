
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga3.h"

Notranje* zgradi(int* t, int n, Notranje** element2naslov) {
    Notranje* prvo = NULL;
    Notranje* zadnje = NULL;
    for (int i = 0; i < n; i++) {
        Notranje* v = calloc(1, sizeof(Notranje));
        v->podatek = t[i];
        element2naslov[v->podatek] = v;
        if (prvo == NULL) {
            prvo = zadnje = v;
        } else {
            zadnje->desno = v;
            zadnje = zadnje->desno;
        }
    }
    return prvo;
}

void izpisiNotranje(Notranje* zacetek) {
    printf("[");
    Notranje* v = zacetek;
    while (v != NULL) {
        if (v != zacetek) {
            printf(", ");
        }
        printf("%d", v->podatek);
        v = v->desno;
    }
    printf("]");
}

void izpisiZunanje(Zunanje* glava) {
    printf("[");
    Zunanje* v = glava;
    while (v != NULL) {
        if (v != glava) {
            printf(", ");
        }
        izpisiNotranje(v->prvo);
        v = v->dol;
    }
    printf("]");
}

void pocistiNotranje(Notranje* prvo) {
    Notranje* v = prvo;
    while (v != NULL) {
        Notranje* brisi = v;
        v = v->desno;
        free(brisi);
    }
}

void pocistiZunanje(Zunanje* glava) {
    Zunanje* v = glava;
    while (v != NULL) {
        pocistiNotranje(v->prvo);
        Zunanje* brisi = v;
        v = v->dol;
        free(brisi);
    }
}

int maksimum(int* t, int n) {
    int naj = 0;
    for (int i = 0; i < n; i++) {
        if (t[i] > naj) {
            naj = t[i];
        }
    }
    return naj;
}

void preveriIstovetnost(Zunanje* glava, Notranje** element2naslov) {
    Zunanje* z = glava;
    while (z != NULL) {
        Notranje* n = z->prvo;
        while (n != NULL) {
            printf("%d", element2naslov[n->podatek] == n);
            n = n->desno;
        }
        z = z->dol;
    }
}

int TABELA[] = {2168, 1333, 783, 9472, 6599, 4213, 2174, 6667, 5789, 4021, 473, 6895, 7544, 1639, 806, 8607, 5317, 600, 7728, 9609, 5181, 1076, 1855, 8098, 7662, 1127, 1625, 8141, 2693, 5929, 6999, 4117, 7942, 5013, 3771, 672, 8289, 9469, 20, 9333, 1206, 4330, 2759, 9478, 7933, 8646, 5477, 3459, 5406, 356, 8392, 7007, 6744, 4451, 4357, 8245, 2737, 1708, 3606, 4513, 3726, 952, 141, 6502, 4876, 9793, 2613, 4968, 8274, 8746, 4080, 1326, 7900, 7127, 3539, 7836, 6057, 7854, 9028, 8608, 9156, 4991, 7476, 8720, 7121, 8384, 3198, 8291, 3894, 7611, 6001, 9086, 1876, 353, 1862, 579, 7321, 6116, 5749, 7348, 8510, 689, 2270, 6462, 1610, 5519, 2860, 5518, 9952, 6279, 9559, 2110, 9926, 7224, 4818, 6456, 28, 562, 3325, 1445, 1615, 9255, 4440, 7663, 9533, 3766, 9241, 4799, 2925, 3762, 5660, 3405, 419, 2822, 6184, 3343, 495, 4770, 5941, 6696, 722, 4754, 1074, 7994, 2784, 6360, 2176, 3864, 7486, 9442, 4681, 6686, 5751, 2252, 2391, 4260, 8497, 3637, 6640, 4998, 72, 2794, 1170, 6524, 1066, 6922, 8791, 4028, 127, 8582, 9735, 8397, 9096, 854, 9990, 4776, 6761, 2060, 7797, 8806, 5520, 8632, 7838, 884, 7806, 8092, 4504, 7261, 3046, 9904, 3817, 7684, 3129, 9643, 6205, 2485, 8157, 5487, 4548, 8764, 787, 7281, 9429, 5687, 6750, 5446, 8596, 4008, 7109, 7804, 573, 3043, 5074, 4221, 563, 8788, 7810, 8693, 3966, 8075, 8044, 606, 3925, 1232, 4483, 7450, 1829, 5733, 3179, 5934, 4135, 7598, 1449, 4344, 7415, 1565, 1687, 8340, 5303, 6887, 5831, 6042, 7275, 5184, 1231, 6782, 3005, 6798, 8099, 9334, 8411, 1368, 9833, 745, 8641, 9124, 7350, 3731, 131, 7386, 4798, 1179, 4780, 8671, 8202, 8951, 4558, 6017, 4711, 5787, 1624, 3411, 9308, 3205, 6339, 8261, 2406, 6219, 45, 1551, 275, 9369, 9770, 3209, 5991, 654, 260, 9228, 785, 2968, 4289, 1339, 9865, 754, 9646, 1648, 1099, 4821, 2304, 6595, 5620, 6849, 9729, 7506, 4899, 6896, 9191, 1784, 1636, 1913, 679, 8842, 5784, 8477, 222, 99, 3208, 2334, 6328, 5079, 4934, 3467, 7123, 2862, 1835, 3699, 9857, 2817, 2083, 6438, 9401, 1707, 1556, 2916, 6371, 1728, 4319, 6669, 3958, 8658, 6575, 9703, 7855, 7618, 880, 5568, 3151, 773, 919, 6449, 3136, 9305, 4874, 3851, 5239, 9414, 3967, 3254, 6531, 7444, 6952, 6712, 8915, 5445, 3127, 2991, 5494, 1920, 6857, 3311, 9696, 86, 9680, 1977, 9390, 3758, 6758, 9574, 67, 8540, 7361, 8181, 295, 9484, 8574, 6435, 1261, 8251, 4401, 8835, 5555, 1885, 9530, 6745, 3790, 741, 3719, 2726, 2997, 3333, 194, 5985, 2140, 4556, 8019, 4576, 6045, 5779, 4698, 4771, 1337, 3984, 1925, 465, 2313, 9370, 148, 7168, 5271, 2642, 4369, 2610, 5026, 5872, 7323, 4540, 4709, 4853, 7882, 370, 6503, 8053, 8783, 161, 3052, 4993, 4408, 9791, 4957, 2622, 7024, 3793, 9455, 1340, 7272, 5175, 9029, 9598, 1007, 4210, 2545, 7033, 1218, 8220, 6864, 4475, 6556, 4089, 6111, 3961, 494, 580, 4772, 4288, 143, 867, 5329, 4004, 8308, 1148, 7829, 1702, 970, 4889, 9868, 4811, 2776, 1747, 9497, 5910, 9627, 8771, 729, 8080, 6628, 6085, 5691, 5736, 365, 8163, 1765, 2680, 7670, 397, 6176, 5410, 9089, 2063, 7966, 1725, 743, 6349, 336, 3939, 8117, 9115, 2258, 5588, 2397, 5421, 4551, 5800, 2600, 6497, 7961, 1319, 3080, 3795, 5318, 5808, 631, 3184, 1731, 7615, 7095, 7146, 7469, 9428, 6752, 6693, 9061, 866, 591, 8567, 158, 9993, 3476, 7397, 4707, 502, 8830, 2802, 458, 4840, 3038, 489, 6845, 7621, 4695, 5849, 5370, 6245, 8508, 6153, 3173, 8408, 6884, 4313, 4795, 6026, 9291, 5650, 7180, 8100, 6363, 5554, 9737, 714, 4541, 7154, 4128, 6612, 3518, 4618, 5011, 1024, 4441, 3600, 4808, 4439, 4677, 3144, 5681, 6625, 1655, 5529, 1640, 901, 3377, 4176, 8828, 4532, 1134, 9968, 6976, 3069, 5824, 3670, 3164, 8906, 6418, 8089, 3219, 7830, 9064, 4304, 1755, 6534, 9615, 8954, 9413, 5546, 4252, 539, 340, 1584, 4468, 3716, 3100, 6160, 8672, 8501, 2274, 9624, 7142, 3353, 243, 4413, 7605, 21, 1106, 2055, 7709, 1917, 5267, 810, 258, 6177, 6043, 2861, 4937, 9780, 7916, 2016, 2116, 6995, 6633, 1336, 2527, 8900, 1210, 2470, 3850, 2117, 8590, 7333};

int main() {
    int n = sizeof(TABELA) / sizeof(int);
    int najElement = maksimum(TABELA, n);
    Notranje** element2naslov = calloc(najElement + 1, sizeof(Notranje*));

    Notranje* zacetek = zgradi(TABELA, n, element2naslov);

    printf("Vhod: ");
    izpisiNotranje(zacetek);
    printf("\n");

    Zunanje* glava = porazdeli(zacetek, 45);

    printf("Izhod: ");
    izpisiZunanje(glava);
    printf("\n");

    printf("Istovetnost vozlisc: ");
    preveriIstovetnost(glava, element2naslov);
    printf("\n");

    pocistiZunanje(glava);
    free(element2naslov);
    return 0;
}
