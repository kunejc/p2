
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

#include "naloga3.h"

Notranje* zgradi(int* t, int n, Notranje** element2naslov) {
    Notranje* prvo = NULL;
    Notranje* zadnje = NULL;
    for (int i = 0; i < n; i++) {
        Notranje* v = calloc(1, sizeof(Notranje));
        v->podatek = t[i];
        element2naslov[v->podatek] = v;
        if (prvo == NULL) {
            prvo = zadnje = v;
        } else {
            zadnje->desno = v;
            zadnje = zadnje->desno;
        }
    }
    return prvo;
}

void izpisiNotranje(Notranje* zacetek) {
    printf("[");
    Notranje* v = zacetek;
    while (v != NULL) {
        if (v != zacetek) {
            printf(", ");
        }
        printf("%d", v->podatek);
        v = v->desno;
    }
    printf("]");
}

void izpisiZunanje(Zunanje* glava) {
    printf("[");
    Zunanje* v = glava;
    while (v != NULL) {
        if (v != glava) {
            printf(", ");
        }
        izpisiNotranje(v->prvo);
        v = v->dol;
    }
    printf("]");
}

void pocistiNotranje(Notranje* prvo) {
    Notranje* v = prvo;
    while (v != NULL) {
        Notranje* brisi = v;
        v = v->desno;
        free(brisi);
    }
}

void pocistiZunanje(Zunanje* glava) {
    Zunanje* v = glava;
    while (v != NULL) {
        pocistiNotranje(v->prvo);
        Zunanje* brisi = v;
        v = v->dol;
        free(brisi);
    }
}

int maksimum(int* t, int n) {
    int naj = 0;
    for (int i = 0; i < n; i++) {
        if (t[i] > naj) {
            naj = t[i];
        }
    }
    return naj;
}

void preveriIstovetnost(Zunanje* glava, Notranje** element2naslov) {
    Zunanje* z = glava;
    while (z != NULL) {
        Notranje* n = z->prvo;
        while (n != NULL) {
            printf("%d", element2naslov[n->podatek] == n);
            n = n->desno;
        }
        z = z->dol;
    }
}

int TABELA[] = {292, 5614, 63, 9133, 5088, 6538, 3802, 6460, 2567, 4557, 1763, 7115, 3629, 8165, 5297, 4347, 7829, 9153, 2912, 4136, 5616, 2887, 6261, 6080, 5273, 6035, 7575, 2580, 5843, 3599, 5597, 7268, 7016, 1568, 1843, 3735, 1509, 7985, 9572, 5159, 4979, 1461, 8608, 2383, 5147, 6555, 377, 4113, 8059, 8515, 569, 6581, 4495, 7755, 9211, 4468, 536, 3371, 95, 8467, 8339, 6844, 5402, 3317, 7742, 6900, 6817, 8637, 3381, 1959, 5521, 9020, 5805, 7510, 4382, 5817, 7486, 6218, 8406, 4032, 1150, 9054, 1405, 2312, 7156, 2915, 5086, 9318, 4182, 9255, 8363, 3349, 1751, 6491, 8523, 3435, 5705, 648, 3378, 6811, 493, 6148, 5017, 3775, 5142, 7577, 4904, 848, 2201, 2686, 7259, 5991, 7301, 613, 4919, 1184, 1801, 980, 3038, 5868, 5622, 3887, 5541, 9218, 7916, 1786, 9460, 7766, 2208, 4226, 6739, 216, 2526, 1111, 4932, 6296, 4901, 5708, 3112, 7157, 9233, 4350, 669, 5380, 5938, 2689, 4574, 8025, 2011, 8318, 6721, 1004, 5867, 2808, 6239, 5414, 2873, 9476, 2794, 9385, 9030, 846, 8925, 2453, 3419, 9452, 1287, 5900, 617, 8844, 3907, 6293, 9008, 8836, 2718, 220, 6888, 5157, 8869, 7068, 1253, 4928, 1536, 9229, 7169, 7893, 5901, 1681, 2854, 5084, 8217, 3426, 7010, 3827, 5763, 9221, 3315, 9955, 8602, 1904, 9107, 9441, 8255, 8522, 701, 970, 8206, 780, 5908, 1781, 3221, 699, 197, 1945, 811, 1777, 4531, 2096, 136, 7505, 1601, 8951, 475, 2234, 3078, 6090, 3178, 808, 3903, 5244, 8532, 6881, 9299, 3071, 1156, 5988, 3402, 455, 5727, 3191, 3408, 1257, 9713, 7272, 2665, 8583, 7405, 2086, 3423, 4743, 4383, 4260, 5812, 6816, 5815, 5336, 3535, 665, 3240, 9589, 3022, 2387, 9664, 3906, 8103, 8195, 585, 3518, 7219, 122, 5678, 4642, 2734, 2666, 9307, 3873, 9739, 9258, 9185, 3291, 6516, 8328, 3183, 7776, 6946, 9425, 3248, 9370, 5232, 4248, 2053, 1267, 3678, 4339, 1422, 1889, 7637, 3243, 4955, 9368, 8842, 6272, 2681, 6866, 2379, 4332, 8107, 3991, 3456, 1836, 1050, 645, 2810, 6402, 1025, 1940, 5555, 7316, 9000, 3283, 4599, 4210, 8428, 2307, 801, 3834, 1718, 6691, 7240, 1756, 2407, 8658, 4372, 9303, 689, 8225, 144, 9428, 1136, 7105, 5299, 9024, 4376, 4818, 7958, 7300, 8157, 8098, 988, 5696, 2072, 2241, 8644, 5878, 4943, 1745, 6679, 3394, 3837, 3962, 7790, 8991, 702, 826, 885, 5957, 7417, 9526, 3257, 6812, 4070, 6652, 4619, 4218, 9022, 9905, 2323, 6406, 3640, 8580, 4621, 4066, 2657, 6924, 4760, 8430, 6167, 9424, 4038, 768, 6927, 2799, 6994, 5470, 7413, 729, 3450, 94, 1527, 5293, 8763, 1648, 187, 6979, 3559, 9832, 5885, 6884, 5907, 2568, 7452, 6908, 6133, 2108, 2952, 1359, 6589, 2852, 4252, 2577, 1179, 7335, 8746, 1192, 2781, 4563, 8918, 6380, 7276, 8591, 4255, 7853, 5718, 1053, 2645, 4474, 7874, 1230, 3689, 392, 434, 2979, 2095, 7862, 2405, 9268, 422, 2170, 1709, 888, 5542, 3851, 1474, 5275, 8979, 9396, 368, 4631, 8879, 3388, 2881, 230, 2, 5096, 7067, 3523, 506, 1913, 5008, 435, 4543, 2683, 3945, 9836, 3451, 2327, 952, 1032, 7534, 8585, 9980, 3143, 3541, 4634, 1058, 607, 9815, 1990, 5021, 3396, 6980, 2851, 9786, 7114, 9553, 327, 8639, 579, 7599, 8026, 2659, 5576, 9741, 8444, 6827, 9983, 600, 545, 5613, 2713, 9063, 6044, 6369, 8014, 3433, 2133, 9124, 616, 2616, 8976, 3173, 1852, 8276, 9576, 6818, 5165, 1588, 9044, 4927, 8805, 6312, 3304, 1000, 4449, 9310, 9581, 4951, 9565, 7969, 3616, 73, 9895, 9290, 4158, 8451, 8289, 3083, 4367, 8815, 3876, 7920, 1080, 6452, 7278, 1270, 1637, 7635, 8372, 2631, 2913, 9650, 7521, 7627, 522, 5526, 5970, 9431, 8198, 9454, 202, 3888, 386, 5005, 2742, 6120, 3188, 4286, 7854, 8180, 9450, 6411, 2319, 4029, 353, 2745, 2314, 4467, 5909, 13, 5072, 1074, 4972, 5270, 5276, 5011, 6711, 5497, 1675, 2043, 9178, 6287, 5520, 6534, 3385, 3403, 5737, 5884, 4766, 7313, 1859, 4645, 2378, 9515, 3245, 6841, 3292, 3204, 3912, 9113, 7263, 2593, 1228, 3041, 8529, 3137, 615, 2447, 7317, 8514, 9921, 6306, 658, 2727, 2632, 7285, 3307, 5149};

int main() {
    int n = sizeof(TABELA) / sizeof(int);
    int najElement = maksimum(TABELA, n);
    Notranje** element2naslov = calloc(najElement + 1, sizeof(Notranje*));

    Notranje* zacetek = zgradi(TABELA, n, element2naslov);

    printf("Vhod: ");
    izpisiNotranje(zacetek);
    printf("\n");

    Zunanje* glava = porazdeli(zacetek, 19);

    printf("Izhod: ");
    izpisiZunanje(glava);
    printf("\n");

    printf("Istovetnost vozlisc: ");
    preveriIstovetnost(glava, element2naslov);
    printf("\n");

    pocistiZunanje(glava);
    free(element2naslov);
    return 0;
}
